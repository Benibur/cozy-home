// Generated by CoffeeScript 1.7.1
var americano, initProxy, options, request, setupChecking, setupRealtime;

americano = require('americano');

request = require('request-json');

initProxy = require('./server/initializers/proxy');

setupRealtime = require('./server/initializers/realtime');

setupChecking = require('./server/initializers/checking');

process.on('uncaughtException', function(err) {
  console.error(err);
  return console.error(err.stack);
});

options = {
  name: 'Cozy Home',
  port: process.env.PORT || 9103,
  host: process.env.HOST || "127.0.0.1",
  root: __dirname
};

americano.start(options, function(app, server) {
  app.server = server;
  if (process.env.NODE_ENV !== "test") {
    initProxy();
  }
  setupRealtime(app);
  return setupChecking();
});
